{% extends "base.html" %}
{% block content %}
<div class="header-flex">
    <h1>Expenses & Budget</h1>
    <button class="btn-primary" onclick="document.getElementById('expModal').style.display='flex'">+ Add Expense</button>
</div>

<div class="glass-card">
    <h3>Recent Transactions</h3>
    <table>
        <thead><tr><th>Description</th><th>Category</th><th>Amount</th></tr></thead>
        <tbody id="expBody"></tbody>
    </table>
</div>

<div id="expModal" class="modal-overlay">
    <div class="modal-card">
        <h3>Add Expense</h3><br>
        <div class="form-group"><label>Description</label><input type="text" id="exDesc"></div>
        <div class="form-group"><label>Amount ($)</label><input type="number" id="exAmt"></div>
        <button class="btn-primary" style="width:100%" onclick="saveExp()">Add Expense</button>
    </div>
</div>

<script>
function saveExp() {
    const item = { desc: document.getElementById('exDesc').value, amt: document.getElementById('exAmt').value };
    let list = JSON.parse(localStorage.getItem('expenses') || '[]');
    list.push(item);
    localStorage.setItem('expenses', JSON.stringify(list));
    location.reload();
}
window.onload = function() {
    const list = JSON.parse(localStorage.getItem('expenses') || '[]');
    document.getElementById('expBody').innerHTML = list.map(i => `<tr><td>${i.desc}</td><td><span class="badge">General</span></td><td style="color:red">-$${i.amt}</td></tr>`).join('');
};
</script>
{% endblock %}